<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Members Area | COMP 2537</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <script>
        fetch('/userinfo')
          .then(res => res.json())
          .then(data => {
            document.getElementById('username').textContent = data.name;
          });
      </script>
      
    <h1>Members Only</h1>
    <p>Hello, <span id="username">[Username]</span>!</p>

    <!-- Random image displayed -->
    <img src="/images/cat1.jpg" alt="Random" id="randomImage" style="max-width: 400px;">

    <br>
    <a href="/logout">Logout</a>

    <script>
        
        // JavaScript to set the username dynamically (if needed) // Try to get session info
        fetch('/userinfo')
            .then(res => {
            if (!res.ok) throw new Error();
            return res.json();
            })
            .then(data => {
            // Logged in
            document.getElementById('username').textContent = data.name;
            document.getElementById('guest').style.display = 'none';
            document.getElementById('user').style.display = 'block';
            })
            .catch(() => {
            // Not logged in
            document.getElementById('guest').style.display = 'block';
            document.getElementById('user').style.display = 'none';
            });

        // JavaScript snippet for random image (optional front-end approach)
        const images = [
            '/images/cat1.jpg',
            '/images/cat2.webp',
            '/images/cat3.jpg',
            '/images/cat4.jpg',
        ];

        const randomImg = images[Math.floor(Math.random() * images.length)];
        document.getElementById('randomImage').src = randomImg;
    </script>
</body>
</html>
